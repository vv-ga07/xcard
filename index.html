<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xリンクカード生成ツール</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Xリンクカード生成ツール</h1>
        <p class="description">タイトル、画像、URLを設定してXで共有するリンクカードを作成します</p>
        
        <!-- GitHub設定セクション -->
        <div class="settings-section">
            <button type="button" id="toggleSettings" class="btn-settings">⚙️ GitHub設定</button>
            <div id="settingsPanel" class="settings-panel" style="display: none;">
                <h3>GitHub Pages設定</h3>
                <p class="settings-info">💡 GitHub PagesのURLから自動検出します。カスタムドメインの場合は手動で入力してください。</p>
                <div class="form-group small">
                    <label for="githubUsername">GitHubユーザー名</label>
                    <input type="text" id="githubUsername" placeholder="your-username">
                </div>
                <div class="form-group small">
                    <label for="githubRepo">リポジトリ名</label>
                    <input type="text" id="githubRepo" placeholder="xcard">
                </div>
                <div class="form-group small">
                    <label for="githubBranch">ブランチ名</label>
                    <input type="text" id="githubBranch" placeholder="main" value="main">
                </div>
                <button type="button" id="saveSettings" class="btn btn-primary">設定を保存</button>
                <p class="settings-status" id="settingsStatus"></p>
            </div>
        </div>
        
        <form id="cardForm" class="card-form">
            <div class="form-group">
                <label for="title">タイトル <span class="required">*</span></label>
                <input type="text" id="title" name="title" required placeholder="リンクカードのタイトルを入力">
            </div>

            <div class="form-group">
                <label for="description">説明文</label>
                <textarea id="description" name="description" rows="3" placeholder="リンクカードの説明文を入力（任意）"></textarea>
            </div>

            <div class="form-group">
                <label for="url">広告URL <span class="required">*</span></label>
                <input type="url" id="url" name="url" required placeholder="https://example.com">
            </div>

            <div class="form-group">
                <label for="image">画像 <span class="required">*</span></label>
                <input type="file" id="image" name="image" accept="image/*" required>
                <div id="imagePreview" class="image-preview"></div>
            </div>

            <div class="form-group">
                <label for="filename">ファイル名</label>
                <input type="text" id="filename" name="filename" placeholder="card" value="card">
                <small>.html が自動的に付加されます</small>
            </div>

            <div class="button-group">
                <button type="submit" class="btn btn-primary">リンクカードを生成</button>
                <button type="button" id="previewBtn" class="btn btn-secondary">プレビュー</button>
            </div>
        </form>

        <div id="preview" class="preview-section" style="display: none;">
            <h2>プレビュー</h2>
            <div id="previewContent" class="preview-content"></div>
        </div>

        <div id="result" class="result-section" style="display: none;">
            <h2>🎉 生成完了！</h2>
            <p>リンクカード用のHTMLファイルが生成されました。</p>
            
            <!-- GitHub Pages URL -->
            <div class="url-box">
                <h3>📎 Xに貼り付けるURL</h3>
                <div class="url-display">
                    <input type="text" id="deploymentUrl" readonly>
                    <button id="copyUrlBtn" class="btn-copy">📋 コピー</button>
                </div>
            </div>

            <div class="button-group">
                <button id="downloadBtn" class="btn btn-primary">💾 HTMLをダウンロード</button>
                <button id="deployBtn" class="btn btn-success">🚀 デプロイコマンドをコピー</button>
            </div>
            
            <div class="info-box deploy-info">
                <h3>🚀 GitHub Pagesへのデプロイ手順</h3>
                <div class="deploy-steps">
                    <div class="deploy-step">
                        <span class="step-number">1</span>
                        <div class="step-content">
                            <strong>ファイルをダウンロード</strong>
                            <p>上の「HTMLをダウンロード」ボタンをクリック</p>
                        </div>
                    </div>
                    <div class="deploy-step">
                        <span class="step-number">2</span>
                        <div class="step-content">
                            <strong>リポジトリに配置</strong>
                            <p>ダウンロードしたファイルをリポジトリに移動</p>
                        </div>
                    </div>
                    <div class="deploy-step">
                        <span class="step-number">3</span>
                        <div class="step-content">
                            <strong>Gitコマンド実行</strong>
                            <p>「デプロイコマンドをコピー」をクリックして、ターミナルで実行</p>
                            <div class="command-preview" id="commandPreview"></div>
                        </div>
                    </div>
                    <div class="deploy-step">
                        <span class="step-number">4</span>
                        <div class="step-content">
                            <strong>Xで共有</strong>
                            <p>上のURLをコピーしてXに貼り付け</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="info-box">
                <h3>💡 ヒント</h3>
                <ul>
                    <li>GitHub Pagesが有効化されていることを確認してください</li>
                    <li>デプロイ後、反映まで数分かかる場合があります</li>
                    <li>初回デプロイ時は、リポジトリのSettings → Pagesで設定が必要です</li>
                </ul>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
